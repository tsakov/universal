<head>
    <link rel="stylesheet" type="text/css" href="deps/framework/fss/css/fss-layout.css" />
    <link rel="stylesheet" type="text/css" href="deps/framework/fss/css/fss-text.css" />
    <link rel="stylesheet" type="text/css" href="deps/components/uiOptions/css/fss/fss-theme-bw-uio.css" />
    <link rel="stylesheet" type="text/css" href="deps/components/uiOptions/css/fss/fss-theme-wb-uio.css" />
    <link rel="stylesheet" type="text/css" href="deps/components/uiOptions/css/fss/fss-theme-by-uio.css" />
    <link rel="stylesheet" type="text/css" href="deps/components/uiOptions/css/fss/fss-theme-yb-uio.css" />
    <link rel="stylesheet" type="text/css" href="deps/components/uiOptions/css/fss/fss-text-uio.css" />

    <link rel="stylesheet" type="text/css" href="deps/components/uiOptions/css/UIOptions.css" />
    <link rel="stylesheet" type="text/css" href="deps/components/uiOptions/css/FullUIOptions.css" />
    <link rel="stylesheet" type="text/css" href="deps/components/uiOptions/css/FullNoPreviewUIOptions.css" />

    <script type="text/javascript" src="deps/MyInfusion.js"></script>
    <script type="text/javascript" src="deps/GPIIStore.js"></script>
    <script type="text/javascript" src="deps/prefPanel.js"></script>
    <!--<script type="text/javascript" src="deps/onScreenKeyboard.js"></script>
    <script type="text/javascript" src="deps/audioFeedback.js"></script>
    <script type="text/javascript" src="deps/renderingSamplePrefPanel.js"></script>-->

    <script type="text/javascript" src="deps/genericControls/js/genericCheckbox.js"></script>
</head>

<body>
    <!-- This div should be placed where the Table of Contents is to be displayed -->
    <div class="flc-toc-tocContainer"> </div>

    <h1> Personal Control Panel Prototype </h1>

    <!-- This is the div that will contain the UI Options component -->
    <div id="pcpMainSettings"> </div>

    <script type="text/javascript">
        fluid.staticEnvironment.gpiiPcp = fluid.typeTag("gpii.pcp");

        fluid.pageEnhancer({
            //tocTemplate: "deps/components/tableOfContents/html/TableOfContents.html",
            /*classnameMap: {
                theme: {
                    "black": "fl-uio-default-theme",
                    "white": "fl-uio-default-theme",
                    "yellow": "fl-uio-default-theme",
                    "green": "fl-uio-default-theme",
                    "blue": "fl-uio-default-theme"
                }
            },

            defaultSiteSettings: {
                theme: "black",             // key from classname map
                textSize: 1,                  // in points
                toc: false,                   // boolean
            }*/
        });

        fluid.uiOptions.fullNoPreview("#pcpMainSettings", {
            // Tell UIOptions where to find all the templates, relative to this file
            prefix: "deps/components/uiOptions/html/",

            /*textControls: {
                options: {
                    classnameMap: "{uiEnhancer}.options.classnameMap",
                    strings: {
                        theme: ["Black", "White", "Yellow", "Green", "Blue"]
                    },
                    controlValues: {
                        theme: ["black", "white", "yellow", "green", "blue"]
                    },

                    textSize: {
                        min: 8,
                        max: 24,
                        step: 1 // I need a way to modify the step - this isn't working
                    }
                }
            },*/

            distributeOptions: [{
                target: "{that > templateLoader}.options.templates",
                record: {
                    uiOptions: "deps/pcp_templates/pcpMainDialog.html",
                    /*textControls: "deps/pcp_templates/UIOptionsTemplate-text.html",
                    onScreenKeyboard: "deps/pcp_templates/onScreenKeyboardTemplate.html",
                    audioFeedback: "deps/pcp_templates/audioFeedbackTemplate.html",
                    controlRenderingSample: "deps/pcp_templates/renderingSamplePrefPanelTemplate.html",*/
                    genericCheckbox: "deps/genericControls/html/genericCheckbox.html"
                }
            }, {
                target: "{that > uiOptionsLoader > uiOptions}",
                record: {
                    selectors: {
                        /*onScreenKeyboard: ".flc-uiOptions-onScreenKeyboard",
                        audioFeedback: ".flc-uiOptions-audioFeedback",
                        controlRenderingSample: ".flc-uiOptions-controlRenderingSample",*/
                        genericCheckbox: ".flc-uiOptions-genericCheckbox"
                    },
                    components: {
                        /*onScreenKeyboard: {
                            type: "gpii.pcp.onScreenKeyboard",
                            container: "{uiOptions}.dom.onScreenKeyboard",
                            createOnEvent: "onUIOptionsMarkupReady",
                            options: {
                                resources: {
                                    template: "{templateLoader}.resources.onScreenKeyboard"
                                }
                            }
                        },
                        audioFeedback: {
                            type: "gpii.pcp.audioFeedback",
                            container: "{uiOptions}.dom.audioFeedback",
                            createOnEvent: "onUIOptionsMarkupReady",
                            options: {
                                resources: {
                                    template: "{templateLoader}.resources.audioFeedback"
                                }
                            }
                        },
                        controlRenderingSample: {
                            type: "gpii.pcp.controlRenderingSample",
                            container: "{uiOptions}.dom.controlRenderingSample",
                            createOnEvent: "onUIOptionsMarkupReady",
                            options: {
                                resources: {
                                    template: "{templateLoader}.resources.controlRenderingSample"
                                }
                            }
                        },*/
                        genericCheckbox: {
                            type: "gpii.pcp.genericCheckbox",
                            container: "{uiOptions}.dom.genericCheckbox",
                            createOnEvent: "onUIOptionsMarkupReady",
                            options: {
                                resources: {
                                    template: "{templateLoader}.resources.genericCheckbox"
                                },

                                // some customization to the preference pane
                                //id: "http://registry.gpii.org/common/fontSize", // the dots and the colon in the id are messing the things up
                                id: "registry*gpii*org/common/fontSize", // this one works just fine
                                preferenceName: "Font Size",
                                preferenceDescription: "Make letters bigger or smaller."
                            }
                        },

                        // this overwrites the previous checkbox component
                        genericCheckbox1: {
                            type: "gpii.pcp.genericCheckbox",
                            container: "{uiOptions}.dom.genericCheckbox",
                            createOnEvent: "onUIOptionsMarkupReady",
                            options: {
                                resources: {
                                    template: "{templateLoader}.resources.genericCheckbox"
                                },

                                id: "registry*gpii*org/common/something",
                                preferenceName: "Something",
                                preferenceDescription: "It's something..."
                            }
                        }
                    }
                }
            }],

            // Tell UIOptions where to redirect to if the user cancels the operation
            uiOptions: {
                options: {
                    listeners: {
                        onCancel: function(){
                            window.location = "";
                        }
                    }
                }
            }
        });

        fluid.demands("fluid.uiOptions.textControls", ["fluid.uiOptions", "gpii.pcp"], {
            funcName: "fluid.emptySubcomponent"
        });

        fluid.demands("fluid.uiOptions.layoutControls", ["fluid.uiOptions", "gpii.pcp"], {
            funcName: "fluid.emptySubcomponent"
        });

        fluid.demands("fluid.uiOptions.linksControls", ["fluid.uiOptions", "gpii.pcp"], {
            funcName: "fluid.emptySubcomponent"
        });

    </script>

</body>